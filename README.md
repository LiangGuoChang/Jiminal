* # Jiminal自我介绍
你有socket编程的需求吗？  
你在为协议的设计而烧脑吗？  
你在为报文类型的变动而烦恼吗？  
你还在写着又长又臭的通讯报文解析代码吗？  
如果有，那么恭喜你，你是这篇文章的读者了。  
**Jiminal是一个基于socket的通讯协议，也是一个java开源框架。**  
> Jimianl的名字起源于单词Terminal，意为终端。  
  
* # 你能用它做的事情  
1. 设计基于Jiminal的通讯报文，以下简称为“包”。  
2. 调用内置的api构造客户端（服务端）进行socket通信。

* # 如何开始  
**让我们从一个故事开始讲起：**  
>&emsp;&emsp;有一天，小杨要去给朋友过生日，于是在蛋糕店订了个蛋糕。第二天，蛋糕店老板出了车祸不幸去世了（我很抱歉），小杨的订单只能取消了，于是蛋糕店老板的儿子通知了小杨。  

OK，故事到此结束，虽然这听上去是一个悲伤的故事，但请不要在意这些细节，让我们继续。  
**分析：**   
在这个故事里，有两个动作：  
1. 小杨下订单  
2. 蛋糕店老板儿子取消订单 
 
**翻译一下就变成了：**
1. 小杨发送了订单包OrderPackage
2. 蛋糕店老板儿子发送了一个取消订单包CancelPackage  
  
* # 什么是包  
与其了解什么是包不如先了解Jiminal协议，
因为包就是根据该协议描述出来的一种实体。在该协议中，包分为两种：**发送包和回复包**。它们在一次**发送/回复**过程中成对存在。更多协议规则在后文中会详细描述。  
> Jiminal协议格式  
> 1. 开始标识：2个字节，作为包的开头  
> 2. 包长度：1个字节，描述了包的长度，即包括下文的3，4，5，6部分  
> 3. 子协议号：1个字节，描述了包的类型，发送包和回复包的子协议号一致  
> 4. 包正文：不定长度，是包的主体部分  
> 5. 信息序列号：2个字节，自动递增的流水号，发送包和回复包信息序列号一致  
> 6. CRC校验码：2个字节，为上文的2，3，4，5部分的计算结果  
> 7. 结束标识：作为包的尾部  

那么问题来了，如何编写订单包（OrderPackage）呢？很简单，既然Jiminal是Java的开源框架，那么一切都将从一个类开始 —— **BasePackage类**。  
先来目睹一下BasePackage的五脏六腑吧，其实很简单：  
```
/**
 * 通讯协议包基类
 * 
 * @author 沫熊工作室 <a href="http://www.darhao.cc">www.darhao.cc</a>
 */
public class BasePackage {

	/**
	 * 包长度
	 */
	public byte length;
	/**
	 * 协议类型
	 */
	public String protocol = "";
	/**
	 * 信息序列号
	 */
	public Short serialNo;
	/**
	 * 错误校验码
	 */
	public Short crc;
	
	/**
	 * 发送者ip
	 */
	public String senderIp = "";
	
	/**
	 * 接受者ip
	 */
	public String receiverIp = "";
	
}
```
